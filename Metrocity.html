<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Metrocity</title>
<link href="styles/Metrocity.css" rel="stylesheet" type="text/css">
<!--The following script tag downloads a font from the Adobe Edge Web Fonts server for use within the web page. We recommend that you do not modify it.--><script>var __adobewebfontsappname__="dreamweaver"</script><script src="http://use.edgefonts.net/lobster:n4:default.js" type="text/javascript"></script>

<!--Javascript for the accordion-->
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
      <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
      <script>
      $(function() {
        $( "#menu" ).accordion();
      });
      </script>

<!--jQuery for the Metrocity application-->
<script language="javascript">
	$(document).ready(function()
	{
		$('.button').mouseenter(function()
		{
			$(this).css("border-color", "#66ccff");
			$(this).css("color", "#66ccff");
		});
		
		$('.button').mouseleave(function()
		{
			$(this).css("border-color", "#969696");
			$(this).css("color", "#969696");
		});
		
		$('.social').mouseenter(function()
		{
			$(this).fadeTo("fast", 1);
		});
		
		$('.social').mouseleave(function()
		{
			$(this).fadeTo("fast", 0.75);
		});
	});
</script>
   
<!--Javascript for the Metrocity calculations-->   
<script language="javascript">
	var rider = "";
	var frequency = 0;
	var month = 0;
	
	//Function: reads which rider the user is: infant, child, student, post-secondary student, etc.
	function getRider(frm)
	{
		for (i=0; i<frm.rider.length; i++)
		{
			if (frm.rider[i].checked)
			{
				if (frm.rider[i].value == "infant")
				{
					alert("Babies get to ride for free. Screw the system.");
				}
				
				else
				{
					rider = frm.rider[i].value;
					$('#frequency_header').click();
				}
			}
		}
	}
	
	//Function: reads the number of times the user rides the TTC per week
	function getFrequency(frm)
	{
		if (inputbox.value>0)
		{
			frequency=inputbox.value;
			$('#month_header').click();
		}
		
		else if (inputbox.value==0)
		{
			alert("Why are you here if you don't take the TTC?");
		}
		
		else 
		{
			alert("Sorry, we couldn't understand that. Please try again!");
		}
		
	}
	
	//Function: reads in the month for which the user wants to buy the Metropass or tokens
	function getMonth(frm)
	{
		for (i=0; i<12; i++)
		{
			if (frm.month[i].checked)
			{
				month = frm.month[i].value;
				$('#result_header').click();
			}
		}
		
		calculate(rider, frequency, month);
	}
	
	//Function: returns the final answer to the user - metropass or tokens
	function answer(frequency, limit)
	{
		if (frequency>=limit)
		{	
			$('#result').html("We recommend you get a <strong>MetroPass</strong>!");
		}
		
		else
		{
			$('#result').html("We recommend you stick with <strong>tickets or tokens</strong> - even if Metropasses are cooler.");
		}
	}
	
	//Function: uses all the inputted information from the user and determines whether the user should purchase a metropass or tokens
	function calculate(rider, frequency, month)
	{
		frequency = Math.ceil(frequency*month/7.0);
		
		switch (rider)
		{
			case "adult":
			{
				answer(frequency, 49);
				break;
			}
			
			case "post_student":
			{
				answer(frequency, 39);
				break;
			}
			
			case "student":
			{
				answer(frequency, 58);
				break;
			}
			
			case "child":
			{
				$('#result').html("You don't have a choice: tickets.");
				break;
			}
			
			case "infant":
			{
				$('#result').html("Again?! Like we said, babies ride for free.");
				break;
			}
			
			default:
			{
				$('#result').html("Sorry. You might have input some invalid information. Please try again.");
			}
		}
	}
	
	//Function: restarts the input fields to allow the user to restart the flow
	function restart()
		{
			for (i=0; i<rider_form.length; i++)
			{
				if (rider_form[i].checked)
				{
					rider_form[i].checked = false;
					rider = '';
				}
			}
			
			resetText();
			frequency = 0;
			
			for (i=0; i<12; i++)
			{
				if (month_form[i].checked)
				{
					month_form[i].checked = false;
					month = 0;
				}
			}
			
			$('#rider_header').click();
		}
		
	//Sub-function: clears the text input fields 
	function resetText()
	{
		document.getElementById("inputbox").value="e.g. 7";
	}
	
</script>  
</head>

<body>
<div id="wrapper">
  <header id="header">Metrocity</header>
    <a href="http://wwww.facebook.com/metrocityapp"><img class="social" id="facebook" src="images/facebook_circle_color-512.png" width="30" height="30"/> </a>
  	<a href="http://www.twitter.com/metrocityapp"><img class="social" id="twitter" src="images/twitter_circle_color-512.png" width="30" height="30"/></a>
  	<a href="http://www.pinterest.com/metrocityapp"><img class="social" id="pinterest" src="images/pinterest-icon-280x280.png" width="30" height="30"/></a>
  	<a href="http://www.plus.google.com/metrocityapp"><img class="social" id="google" src="images/1383160351_google_circle_color.png" width="30" height="30"/></a>	
  <div id="banner">
  <img src="images/TTC-Streetcar.jpg" width="1000" height="547"  alt=""/> </div>
  <article id="about">
  	<h1>Metropass or Tokens?</h1>
    <p>*******************</p>
    <p>Don't know which to buy for the month?</p>
    <p>Follow the instructions below to find out!</p>
    <p>*******************</p>
  </article>
  
<div id="calculator">
    <h1 id="header2" style="text-align: center">Let's get started!</h1>
        <div id="menu">
            <h3 id="rider_header">TTC Rider</h3>
                <div>
                    <p>Which TTC rider are you?</p>
                    <form name="rider_form">
                    	<table border="0" Cellspacing = "0" Cellpadding = "6">
                        	<tr>
                            	<td><input type="radio" id="radio" name="rider" value="infant" onClick="getRider(this.form)"/>Baby</td>
                            	<td><input type="radio" id="radio" name="rider" value="child" onClick="getRider(this.form)"/>Child</td>
                                <td><input type="radio" id="radio" name="rider" value="student" onClick="getRider(this.form)"/>Student or Senior</td>
                                <td><input type="radio" id="radio" name="rider" value="post_student" onClick="getRider(this.form)"/>Post-Secondary Student</td>
                                <td><input type="radio" id="radio" name="rider" value="adult" onClick="getRider(this.form)"/>Adult</td>
                            </tr>
                        </table>
                    </form>
                </div>
            <h3 id="frequency_header">Frequency of travel</h3>
                <div>
                    <p>& how many TTC trips do you plan to make each week?</p>
                    <FORM id="frequency_form" ACTION="" METHOD="GET">
<INPUT TYPE="text" id="inputbox" class="button" NAME="inputbox" VALUE="e.g. 7" onfocus="if(this.value == 'e.g. 7') {this.value=''}" onblur="if(this.value == ''){this.value ='e.g. 7'}"/>
<INPUT TYPE="button" id="button" class="button" NAME="button" value="Go" onClick="getFrequency(this.form)"/>
</FORM>
                </div>
            <h3 id="month_header">Month of the year</h3>
            	<div>
                	<p>Last question, for which month were you thinking of?</p>
                    <form name="month_form">
                    	<table border="0" Cellspacing = "0" Cellpadding = "6">
                        	<tr>
                            	<td><input type="radio" id="radio" name="month" value=31 onClick="getMonth(this.form)"/>Jan</td>
                            	<td><input type="radio" id="radio" name="month" value=28 onClick="getMonth(this.form)"/>Feb</td>
                                <td><input type="radio" id="radio" name="month" value=31 onClick="getMonth(this.form)"/>Mar</td>
                                <td><input type="radio" id="radio" name="month" value=30 onClick="getMonth(this.form)"/>Apr</td>
                                <td><input type="radio" id="radio" name="month" value=31 onClick="getMonth(this.form)"/>May</td>
                                <td><input type="radio" id="radio" name="month" value=30 onClick="getMonth(this.form)"/>Jun</td>
                            	<td><input type="radio" id="radio" name="month" value=31 onClick="getMonth(this.form)"/>Jul</td>
                                <td><input type="radio" id="radio" name="month" value=31 onClick="getMonth(this.form)"/>Aug</td>
                                <td><input type="radio" id="radio" name="month" value=30 onClick="getMonth(this.form)"/>Sep</td>
                                <td><input type="radio" id="radio" name="month" value=31 onClick="getMonth(this.form)"/>Oct</td>
                                <td><input type="radio" id="radio" name="month" value=30 onClick="getMonth(this.form)"/>Nov</td>
                                <td><input type="radio" id="radio" name="month" value=31 onClick="getMonth(this.form)"/>Dec</td>
                            </tr>
                        </table>
                    </form>
                    
                </div>
            <h3 id="result_header">Result</h3>
                <div>
                    <p id="result">No need to rush... the bus isn't going anywhere!</p>
                     <INPUT TYPE="button" id="restart" class="button" NAME="restart" value="Try Again!" onClick="restart()"/>
</FORM>
                </div>
               
        </div>
        
  <a href="https://play.google.com/store"><img class="social" id="download" src="images/download.jpg"/></a>
  <footer>&copy;Copyright 2013 Justin Wong</footer>
</div>
</body>
</html>
